#:kivy 1.0
#:import kivy kivy

<TitleBox>:
    padding: '10dp'
    spacing: '10dp'
    Image:
        size_hint: None, None
        size: '24dp', '24dp'
        source: 'data/logo/kivy-icon-64.png'
        mipmap: True
    Label:
        height: '24dp'
        text_size: self.width, None
        color: (1, 1, 1, .8)
        text: 'PTime - ' + root.lbl

<SelectBox>:
    popup: popup
    values: values
    done: done

    Popup:
        id: popup
        title: root.title
        size_hint: (None, None)
        size: ('300dp', '300dp')

        BoxLayout:
            orientation: 'vertical'
            Label:
                size_hint_y: None
                height: '50sp'
                text: 'Name'
                halign: 'left'
                valign: 'middle'
                text_size: self.width, None

            BoxLayout:
                size_hint_y: None
                height: '50sp'
                Spinner:
                    id: values

            Label:
            BoxLayout:
                size_hint_y: None
                height: '50sp'
                spacing: '10dp'
                Button:
                    id: done
                    text: 'Done'
                Button:
                    text: 'Cancel'
                    on_release: root.close()

<InputBox>:
    popup: popup
    value: value
    done: done

    Popup:
        id: popup
        title: root.title
        size_hint: (None, None)
        size: ('300dp', '250dp')

        BoxLayout:
            orientation: 'vertical'
            Label:
                size_hint_y: None
                height: '50sp'
                text: 'Name'
                halign: 'left'
                valign: 'middle'
                text_size: self.width, None

            TextInput:
                multiline: False
                size_hint_y: None
                height: '35sp'
                id: value
                focus: True
                on_text_validate: root.done.dispatch('on_release')

            Label:
            BoxLayout:
                size_hint_y: None
                height: '50sp'
                spacing: '10dp'
                Button:
                    id: done
                    text: 'Done'
                Button:
                    text: 'Cancel'
                    on_release: root.close()

<ConfirmBox>:
    popup: popup
    done: done

    Popup:
        id: popup
        title: root.title
        size_hint: (None, None)
        size: ('250dp', '150dp')

        BoxLayout:
            size_hint_y: None
            height: '50sp'
            spacing: '10dp'
            Button:
                id: done
                text: 'Done'
            Button:
                text: 'Cancel'
                on_release: root.close()

<MainScreen>:
    title: title

    canvas:
        Color:
            rgb: 1, 1, 1
        Rectangle:
            source: 'data/images/background.jpg'
            size: self.size

    BoxLayout:
        orientation: 'vertical'

        TitleBox:
            id: title
            pos_hint: {'top': 1}
            size_hint_y: None
            height: '44dp'
            lbl: 'Current project: ' + root.project

        Button:
            size_hint_y: None
            text: 'Select Project'
            height: '50sp'
            on_release: root.btn_select_project()
        Button:
            size_hint_y: None
            text: 'New Project'
            height: '50sp'
            on_release: root.btn_add_project()
        Button:
            size_hint_y: None
            text: 'Open Project'
            height: '50sp'
            on_press: root.open_project()
        Label:
            # filler

<ProjectScreen>:
    title: title
    grid: grid

    canvas:
        Color:
            rgb: 1, 1, 1
        Rectangle:
            source: 'data/images/background.jpg'
            size: self.size

    BoxLayout:
        orientation: 'vertical'

        TitleBox:
            id: title
            pos_hint: {'top': 1}
            size_hint_y: None
            height: '44dp'
            lbl: 'Categories'

        BoxLayout:
            size_hint: None, None
            height: '32sp'
            Button:
                size_hint_x: None
                background_normal: '../icons/back.png'
                #text: '<-'
                on_press: root.back()
                width: '32sp'
                border: (0, 0, 0, 0)

            Button:
                size_hint_x: None
                background_normal: '../icons/add.png'
                #text: '+'
                on_press: root.btn_add_category()
                width: '32sp'
                border: (0, 0, 0, 0)

        ScrollView:
            GridLayout:
                cols: 1
                size_hint: 1, None
                id: grid

<CategoryScreen>:
    title: title
    grid: grid

    canvas:
        Color:
            rgb: 1, 1, 1
        Rectangle:
            source: 'data/images/background.jpg'
            size: self.size

    BoxLayout:
        orientation: 'vertical'

        TitleBox:
            id: title
            pos_hint: {'top': 1}
            size_hint_y: None
            height: '44dp'
            lbl: 'Category'

        BoxLayout:
            size_hint: None, None
            height: '32sp'
            Button:
                size_hint_x: None
                background_normal: '../icons/back.png'
                #text: '<-'
                on_press: root.back()
                width: '32sp'
                border: (0, 0, 0, 0)

            Button:
                size_hint_x: None
                background_normal: '../icons/add.png'
                #text: '+'
                on_press: root.btn_add_task()
                width: '32sp'
                border: (0, 0, 0, 0)

            Button:
                size_hint_x: None
                background_normal: '../icons/delete.png'
                #text: '+'
                on_press: root.btn_delete_category()
                width: '32sp'
                border: (0, 0, 0, 0)

        ScrollView:
            GridLayout:
                cols: 1
                size_hint: 1, None
                id: grid

<TaskScreen>:
    title: title
    grid: grid

    canvas:
        Color:
            rgb: 1, 1, 1
        Rectangle:
            source: 'data/images/background.jpg'
            size: self.size

    BoxLayout:
        orientation: 'vertical'

        TitleBox:
            id: title
            pos_hint: {'top': 1}
            size_hint_y: None
            height: '44dp'
            lbl: 'Category'

        Button:
            size_hint_y: None
            text: 'Back'
            height: '50sp'
            on_press: root.manager.current='project'

        Button:
            size_hint_y: None
            text: 'Add Task'
            height: '50sp'
            on_press: root.btn_add_task()

        Label:
            size_hint_y: None
            height: '50sp'

        ScrollView:
            GridLayout:
                cols: 1
                size_hint: 1, None
                id: grid

